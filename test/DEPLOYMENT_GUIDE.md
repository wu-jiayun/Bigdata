# 湖南省农业种植适宜性区划分析系统 - 部署指南

## 🚀 快速部署

### 系统要求
- **操作系统**: Windows 10/11, Linux, macOS
- **Python版本**: 3.7 或更高版本
- **数据库**: MySQL 5.7+ (可选，系统支持模拟数据模式)
- **内存**: 建议 4GB 以上
- **存储**: 至少 1GB 可用空间

### 安装步骤

1. **克隆或下载项目**
   ```bash
   # 如果使用Git
   git clone <repository-url>
   cd test
   
   # 或直接解压项目文件到目标目录
   ```

2. **安装Python依赖**
   ```bash
   pip install -r requirements.txt
   ```

3. **配置数据库（可选）**
   - 编辑 `config.py` 文件
   - 设置MySQL连接参数
   - 如不配置数据库，系统将使用模拟数据

4. **启动系统**
   ```bash
   python app.py
   ```

5. **访问系统**
   - 打开浏览器访问: http://localhost:5004
   - 系统支持局域网访问

## 📋 功能模块说明

### 主要功能
1. **多准则适宜性区划** - 支持12种农作物的适宜性分析
2. **联网报告生成** - 集成实时数据的智能报告
3. **数据可视化** - 交互式图表和地图展示
4. **完整数据导出** - 纯文本格式的完整报告

### 支持的作物类型
- 水稻、玉米、大豆、小麦
- 棉花、油菜、花生、红薯
- 烟草、茶叶、柑橘、蔬菜

## 🔧 配置说明

### 数据库配置 (config.py)
```python
MYSQL_CONFIG = {
    'host': 'localhost',
    'port': 3306,
    'user': 'your_username',
    'password': 'your_password',
    'database': 'agricultural_db',
    'charset': 'utf8mb4'
}
```

### 系统配置
- **端口**: 默认5004，可在app.py中修改
- **调试模式**: 生产环境建议设置为False
- **日志级别**: 可在代码中调整logging配置

## 🌐 网络访问

### 局域网访问
系统默认绑定到 `0.0.0.0:5004`，支持局域网内其他设备访问：
- 局域网访问地址: http://[服务器IP]:5004
- 确保防火墙允许5004端口访问

### 生产环境部署
建议使用反向代理（如Nginx）和WSGI服务器（如Gunicorn）：

```bash
# 安装Gunicorn
pip install gunicorn

# 启动生产服务
gunicorn -w 4 -b 0.0.0.0:5004 app:app
```

## 📊 数据说明

### 模拟数据模式
系统内置模拟数据，无需数据库即可运行：
- 温度数据：基于湖南省气候特征模拟
- 土壤数据：涵盖主要土壤类型分布
- 作物数据：12种作物的适宜性参数

### 真实数据模式
连接MySQL数据库后，系统将使用真实农业数据：
- 需要预先导入农业数据表
- 支持实时数据更新
- 提供更精确的分析结果

## 🔍 故障排除

### 常见问题

1. **端口被占用**
   ```
   解决方案：修改app.py中的端口号或关闭占用进程
   ```

2. **数据库连接失败**
   ```
   解决方案：检查config.py配置或使用模拟数据模式
   ```

3. **依赖包安装失败**
   ```
   解决方案：使用国内镜像源
   pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple
   ```

4. **图表不显示**
   ```
   解决方案：检查网络连接，确保ECharts库正常加载
   ```

### 日志查看
系统运行时会输出详细日志，包括：
- 系统启动信息
- API请求处理
- 数据库操作
- 错误信息

## 📱 浏览器兼容性

### 推荐浏览器
- Chrome 80+
- Firefox 75+
- Safari 13+
- Edge 80+

### 移动端支持
系统采用响应式设计，支持移动设备访问：
- 手机浏览器访问
- 平板设备优化
- 触摸操作支持

## 🔒 安全建议

### 生产环境安全
1. 关闭调试模式 (`debug=False`)
2. 使用强密码配置数据库
3. 配置防火墙规则
4. 定期更新依赖包
5. 使用HTTPS协议

### 数据安全
- 定期备份数据库
- 限制数据库访问权限
- 监控系统访问日志

## 📞 技术支持

如遇到部署问题，请检查：
1. Python版本兼容性
2. 依赖包完整性
3. 网络连接状态
4. 系统资源使用情况

系统设计为开箱即用，大多数问题可通过重启服务解决。
