/*
 * Bootstrap 5.3 JavaScript Bundle - 简化版本
 * 提供基础的Bootstrap JavaScript功能
 */

// Bootstrap 基础功能对象
window.bootstrap = {
    // 模态框功能
    Modal: function(element, options) {
        return {
            show: function() {
                if (element) {
                    element.style.display = 'block';
                    element.classList.add('show');
                }
            },
            hide: function() {
                if (element) {
                    element.style.display = 'none';
                    element.classList.remove('show');
                }
            }
        };
    },
    
    // 提示框功能
    Tooltip: function(element, options) {
        return {
            show: function() { console.log('Tooltip show'); },
            hide: function() { console.log('Tooltip hide'); }
        };
    },
    
    // 弹出框功能
    Popover: function(element, options) {
        return {
            show: function() { console.log('Popover show'); },
            hide: function() { console.log('Popover hide'); }
        };
    },
    
    // 警告框功能
    Alert: function(element) {
        return {
            close: function() {
                if (element) {
                    element.style.display = 'none';
                }
            }
        };
    }
};

// 基础事件处理
document.addEventListener('DOMContentLoaded', function() {
    // 处理警告框关闭按钮
    document.querySelectorAll('.btn-close').forEach(function(btn) {
        btn.addEventListener('click', function() {
            const alert = this.closest('.alert');
            if (alert) {
                alert.style.display = 'none';
            }
        });
    });
    
    // 处理下拉菜单
    document.querySelectorAll('[data-bs-toggle="dropdown"]').forEach(function(toggle) {
        toggle.addEventListener('click', function(e) {
            e.preventDefault();
            const menu = this.nextElementSibling;
            if (menu && menu.classList.contains('dropdown-menu')) {
                menu.classList.toggle('show');
            }
        });
    });
    
    // 处理标签页切换
    document.querySelectorAll('[data-bs-toggle="tab"]').forEach(function(tab) {
        tab.addEventListener('click', function(e) {
            e.preventDefault();
            
            // 移除所有活动状态
            document.querySelectorAll('.nav-link').forEach(function(link) {
                link.classList.remove('active');
            });
            document.querySelectorAll('.tab-pane').forEach(function(pane) {
                pane.classList.remove('active', 'show');
            });
            
            // 添加当前活动状态
            this.classList.add('active');
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.classList.add('active', 'show');
            }
        });
    });
    
    // 处理折叠面板
    document.querySelectorAll('[data-bs-toggle="collapse"]').forEach(function(toggle) {
        toggle.addEventListener('click', function(e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('data-bs-target') || this.getAttribute('href'));
            if (target) {
                if (target.classList.contains('show')) {
                    target.classList.remove('show');
                    target.style.height = '0px';
                } else {
                    target.classList.add('show');
                    target.style.height = target.scrollHeight + 'px';
                }
            }
        });
    });
});

// 点击外部关闭下拉菜单
document.addEventListener('click', function(e) {
    if (!e.target.matches('[data-bs-toggle="dropdown"]')) {
        document.querySelectorAll('.dropdown-menu.show').forEach(function(menu) {
            menu.classList.remove('show');
        });
    }
});

console.log('Bootstrap 简化版本已加载 - 提供基础交互功能');
